<p><strong>MySQL</strong></p>

<hr>

<p><div class="toc">
<ul>
<li><ul>
<li><a href="#apache">Apache</a></li>
<li><a href="#安装">安装</a></li>
<li><a href="#关于mysqlsock文件">关于mysql.sock文件</a></li>
<li><a href="#修改默认数据库文件目录">修改默认数据库文件目录</a></li>
<li><a href="#mysql常用操作">MySQL常用操作</a><ul>
<li><a href="#是否安装了mysql">是否安装了MySQL</a></li>
<li><a href="#mysql是否已经启动">MySQL是否已经启动?</a></li>
<li><a href="#登录">登录</a></li>
<li><a href="#修改密码">修改密码</a></li>
<li><a href="#新建一个数据库">新建一个数据库</a></li>
<li><a href="#显示当前所有数据库的名称">显示当前所有数据库的名称</a></li>
</ul>
</li>
<li><a href="#关于mycnf">关于my.cnf</a></li>
<li><a href="#开通外部连接权限">开通外部连接权限</a></li>
<li><a href="#导入sql文件">导入SQL文件</a></li>
<li><a href="#数据库排序规则">数据库排序规则</a></li>
<li><a href="#phpmyadmin怎样导入csv">PhpMyAdmin怎样导入CSV?</a></li>
</ul>
</li>
</ul>
</div>
</p>

<p><a href="http://www.cnblogs.com/smalldirector/archive/2011/12/27/2303648.html">http://www.cnblogs.com/smalldirector/archive/2011/12/27/2303648.html</a></p>

<hr>



<h2 id="apache">Apache</h2>



<pre class="prettyprint"><code class=" hljs cmake">yum <span class="hljs-keyword">install</span> httpd

/etc/init.d/httpd start <span class="hljs-comment">#启动Apache</span>
/etc/init.d/httpd restart <span class="hljs-comment">#重启Apache</span>

chkconfig httpd <span class="hljs-keyword">on</span> <span class="hljs-comment">#设为开机启动</span></code></pre>



<h2 id="安装">安装</h2>

<p>下载 <a href="http://dev.mysql.com/downloads/mysql/">http://dev.mysql.com/downloads/mysql/</a></p>



<pre class="prettyprint"><code class=" hljs avrasm">wget http://dev<span class="hljs-preprocessor">.mysql</span><span class="hljs-preprocessor">.com</span>/get/Downloads/MySQL-<span class="hljs-number">5.6</span>/MySQL-<span class="hljs-number">5.6</span><span class="hljs-number">.21</span>-<span class="hljs-number">1.</span>el7<span class="hljs-preprocessor">.x</span>86_64<span class="hljs-preprocessor">.rpm</span>-bundle<span class="hljs-preprocessor">.tar</span></code></pre>

<p>解压缩  </p>



<pre class="prettyprint"><code class=" hljs avrasm">tar xvf MySQL-<span class="hljs-number">5.6</span><span class="hljs-number">.21</span>-<span class="hljs-number">1.</span>el7<span class="hljs-preprocessor">.x</span>86_64<span class="hljs-preprocessor">.rpm</span>-bundle<span class="hljs-preprocessor">.tar</span></code></pre>

<p>安装</p>



<pre class="prettyprint"><code class=" hljs avrasm">rpm -ivh MySQL-server-<span class="hljs-number">5.6</span><span class="hljs-number">.21</span>-<span class="hljs-number">1.</span>el7<span class="hljs-preprocessor">.x</span>86_64<span class="hljs-preprocessor">.rpm</span></code></pre>

<p><code>yum mysql mysql-server mysql-devel</code></p>



<pre class="prettyprint"><code class=" hljs lasso">yum <span class="hljs-built_in">list</span> available mysql<span class="hljs-subst">*</span>
yum install mysql55<span class="hljs-attribute">-mysql</span><span class="hljs-built_in">.</span>x86_64
yum install mysql55<span class="hljs-attribute">-mysql</span><span class="hljs-attribute">-server</span><span class="hljs-built_in">.</span>x86_64
yum install mysql55<span class="hljs-attribute">-mysql</span><span class="hljs-attribute">-devel</span><span class="hljs-built_in">.</span>x86_64</code></pre>

<p>参考资料:  <br>
<a href="http://www.2cto.com/database/201402/282088.html">http://www.2cto.com/database/201402/282088.html</a></p>



<h2 id="关于mysqlsock文件">关于<code>mysql.sock</code>文件</h2>

<p>Mysql有两种连接方式: <br>
1. TCP/IP <br>
2. socket</p>

<p><code>mysql.sock</code>是用于socket连接的文件, 是mysql的主机和客户机在同一host(物理服务器)上的时候, 使用unix domain socket做为通讯协议的载体, 它比tcp快.  </p>

<p>看看你的 /tmp/mysql.sock 这个文件是否存在? 正常情况下它应该在那里的, 或者用 netstat 看看结果中是否有 Active UNIX domain sockets  </p>

<p>mysql.sock是随每一次 mysql server启动生成的. 已经根据你在更改完my.cnf后重启mysql时重新生成了一次, 信息已跟着变更.  </p>

<p><code>Can't connect to local MySQL server through socket '/tmp/mysql.sock'</code> <br>
通常遇到这个问题的原因就是你的mysql server没运行起来.  </p>

<p>参考资料: <br>
<a href="http://blog.itechol.com/space-33-do-blog-id-4962.html">http://blog.itechol.com/space-33-do-blog-id-4962.html</a>  </p>



<h2 id="修改默认数据库文件目录">修改默认数据库文件目录</h2>

<p>以xampp为例, 旧目录为<code>/opt/lampp/var/mysql</code>, 新目录为<code>/mnt/hgfs/FileManager/mysql</code>: <br>
1. 停止mysql服务 <br>
2. 复制<code>/opt/lampp/var/mysql</code>目录到<code>/mnt/hgfs/FileManager/mysql</code> <br>
3. 打开 <code>/opt/lampp/etc/my.cnf</code>, 替换所有的<code>/opt/lampp/var/mysql</code>为<code>/mnt/hgfs/FileManager/mysql</code>. <br>
4. 在 <code>/opt/lampp/etc/my.cnf</code>中找到<code>[mysqld]</code>, 在下面加入: <code>datadir = /mnt/hgfs/FileManager/mysql/</code> <br>
5. 打开xampp的配置文件<code>/opt/lampp/properties.ini</code>, 替换所有的<code>/opt/lampp/var/mysql</code>为<code>/mnt/hgfs/FileManager/mysql</code>. <br>
6. 打开<code>/opt/lampp/mysql/scripts/ctl.sh</code>, 替换所有的<code>/opt/lampp/var/mysql</code>为<code>/mnt/hgfs/FileManager/mysql</code>. <br>
7. 修改<code>/mnt/hgfs/FileManager/mysql</code>的访问权限, <strong>或</strong>注销 <code>/opt/lampp/etc/my.cnf</code> 中的<code>socket      = /mnt/hgfs/FileManager/mysql/mysql.sock</code> <br>
8. 启动mysql服务</p>



<h2 id="mysql常用操作">MySQL常用操作</h2>



<h3 id="是否安装了mysql">是否安装了MySQL</h3>

<p><code>rpm -qa mysql</code>, 对xampp无效  </p>



<h3 id="mysql是否已经启动">MySQL是否已经启动?</h3>

<p>通过端口 <br>
    <code>netstat -lntp | grep 3306</code>, 对xampp有效 <br>
通过服务 <br>
    <code>service mysqld status</code>, 对xampp无效 <br>
通过进程(有进程则反回非0) <br>
    <code>pgrep -l  mysqld |wc -l</code> <br>
    <code>ps -ef|grep mysqld  |grep -v "grep"|wc -l</code></p>



<h3 id="登录">登录</h3>

<p><code>./mysql -u root -p</code></p>



<h3 id="修改密码">修改密码</h3>



<pre class="prettyprint"><code class=" hljs sql">./mysql -u root -p
use mysql;
<span class="hljs-operator"><span class="hljs-keyword">update</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">set</span> password=PASSWORD(<span class="hljs-string">'your_new_password'</span>) <span class="hljs-keyword">where</span> <span class="hljs-keyword">User</span>=<span class="hljs-string">'root'</span>;</span>
flush privileges;
quit;</code></pre>

<p>参考资料: <a href="http://www.liquidweb.com/kb/change-a-password-for-mysql-on-linux-via-command-line/">http://www.liquidweb.com/kb/change-a-password-for-mysql-on-linux-via-command-line/</a></p>



<h3 id="新建一个数据库">新建一个数据库</h3>

<p>方法1: <br>
<code>CREATE DATABASE tutorial_database;</code> <br>
方法2: <br>
<code>CREATE DATABASE IF NOT EXISTS tutorial_database;</code></p>



<h3 id="显示当前所有数据库的名称">显示当前所有数据库的名称</h3>

<p><code>SHOW DATABASES;</code></p>



<h2 id="关于mycnf">关于my.cnf</h2>

<p>下面是安装XAMPP后的my.cnf文件:  </p>



<pre class="prettyprint"><code class="language-ini hljs "># Example MySQL config file for medium systems.
#
# This is for a system with little memory (32M - 64M) where MySQL plays
# an important part, or systems up to 128M where MySQL is used together with
# other programs (such as a web server)
#
# You can copy this file to
# /etc/my.cnf to set global options,
# mysql-data-dir/my.cnf to set server-specific options (in this
# installation this directory is /opt/lampp/var/mysql) or
# ~/.my.cnf to set user-specific options.
#
# In this file, you can use all long options that a program supports.
# If you want to know which options a program supports, run the program
# with the "--help" option.

# The following options will be passed to all MySQL clients
<span class="hljs-title">[client]</span>
#password   = your_password
<span class="hljs-setting">port        = <span class="hljs-value"><span class="hljs-number">3306</span></span></span>
<span class="hljs-setting">socket      = <span class="hljs-value">/opt/lampp/var/mysql/mysql.sock</span></span>

# Here follows entries for some specific programs

# The MySQL server
<span class="hljs-title">[mysqld]</span>
<span class="hljs-setting">user = <span class="hljs-value">mysql</span></span>
<span class="hljs-setting">port=<span class="hljs-value"><span class="hljs-number">3306</span></span></span>
<span class="hljs-setting">socket      = <span class="hljs-value">/opt/lampp/var/mysql/mysql.sock</span></span>
skip-external-locking
<span class="hljs-setting">key_buffer = <span class="hljs-value"><span class="hljs-number">16</span>M</span></span>
<span class="hljs-setting">max_allowed_packet = <span class="hljs-value"><span class="hljs-number">1</span>M</span></span>
<span class="hljs-setting">table_open_cache = <span class="hljs-value"><span class="hljs-number">64</span></span></span>
<span class="hljs-setting">sort_buffer_size = <span class="hljs-value"><span class="hljs-number">512</span>K</span></span>
<span class="hljs-setting">net_buffer_length = <span class="hljs-value"><span class="hljs-number">8</span>K</span></span>
<span class="hljs-setting">read_buffer_size = <span class="hljs-value"><span class="hljs-number">256</span>K</span></span>
<span class="hljs-setting">read_rnd_buffer_size = <span class="hljs-value"><span class="hljs-number">512</span>K</span></span>
<span class="hljs-setting">myisam_sort_buffer_size = <span class="hljs-value"><span class="hljs-number">8</span>M</span></span>

# Where do all the plugins live
<span class="hljs-setting">plugin_dir = <span class="hljs-value">/opt/lampp/lib/mysql/plugin/</span></span>

# Don't listen on a TCP/IP port at all. This can be a security enhancement,
# if all processes that need to connect to mysqld run on the same host.
# All interaction with mysqld must be made via Unix sockets or named pipes.
# Note that using this option without enabling named pipes on Windows
# (via the "enable-named-pipe" option) will render mysqld useless!
# 
#skip-networking

# Replication Master Server (default)
# binary logging is required for replication
# log-bin deactivated by default since XAMPP 1.4.11
#log-bin=mysql-bin

# required unique id between 1 and 2^32 - 1
# defaults to 1 if master-host is not set
# but will not function as a master if omitted
<span class="hljs-setting">server-id   = <span class="hljs-value"><span class="hljs-number">1</span></span></span>

# Replication Slave (comment out master section to use this)
#
# To configure this host as a replication slave, you can choose between
# two methods :
#
# 1) Use the CHANGE MASTER TO command (fully described in our manual) -
#    the syntax is:
#
#    CHANGE MASTER TO MASTER_HOST=&lt;host&gt;, MASTER_PORT=&lt;port&gt;,
#    MASTER_USER=&lt;user&gt;, MASTER_PASSWORD=&lt;password&gt; <span class="hljs-comment">;</span>
#
#    where you replace &lt;host&gt;, &lt;user&gt;, &lt;password&gt; by quoted strings and
#    &lt;port&gt; by the master's port number (3306 by default).
#
#    Example:
#
#    CHANGE MASTER TO MASTER_HOST='125.564.12.1', MASTER_PORT=3306,
#    MASTER_USER='joe', MASTER_PASSWORD='secret'<span class="hljs-comment">;</span>
#
# OR
#
# 2) Set the variables below. However, in case you choose this method, then
#    start replication for the first time (even unsuccessfully, for example
#    if you mistyped the password in master-password and the slave fails to
#    connect), the slave will create a master.info file, and any later
#    change in this file to the variables' values below will be ignored and
#    overridden by the content of the master.info file, unless you shutdown
#    the slave server, delete master.info and restart the slaver server.
#    For that reason, you may want to leave the lines below untouched
#    (commented) and instead use CHANGE MASTER TO (see above)
#
# required unique id between 2 and 2^32 - 1
# (and different from the master)
# defaults to 2 if master-host is set
# but will not function as a slave if omitted
#server-id       = 2
#
# The replication master for this slave - required
#master-host     =   &lt;hostname&gt;
#
# The username the slave will use for authentication when connecting
# to the master - required
#master-user     =   &lt;username&gt;
#
# The password the slave will authenticate with when connecting to
# the master - required
#master-password =   &lt;password&gt;
#
# The port the master is listening on.
# optional - defaults to 3306
#master-port     =  &lt;port&gt;
#
# binary logging - not required for slaves, but recommended
#log-bin=mysql-bin


# Point the following paths to different dedicated disks
#tmpdir     = /tmp/     
#log-update     = /path-to-dedicated-directory/hostname

# Uncomment the following if you are using BDB tables
#bdb_cache_size = 4M
#bdb_max_lock = 10000

# Comment the following if you are using InnoDB tables
#skip-innodb
<span class="hljs-setting">innodb_data_home_dir = <span class="hljs-value">/opt/lampp/var/mysql/</span></span>
<span class="hljs-setting">innodb_data_file_path = <span class="hljs-value">ibdata1:<span class="hljs-number">10</span>M:autoextend</span></span>
<span class="hljs-setting">innodb_log_group_home_dir = <span class="hljs-value">/opt/lampp/var/mysql/</span></span>
# You can set .._buffer_pool_size up to 50 - 80 %
# of RAM but beware of setting memory usage too high
<span class="hljs-setting">innodb_buffer_pool_size = <span class="hljs-value"><span class="hljs-number">16</span>M</span></span>
# Deprecated in 5.6
#innodb_additional_mem_pool_size = 2M
# Set .._log_file_size to 25 % of buffer pool size
<span class="hljs-setting">innodb_log_file_size = <span class="hljs-value"><span class="hljs-number">5</span>M</span></span>
<span class="hljs-setting">innodb_log_buffer_size = <span class="hljs-value"><span class="hljs-number">8</span>M</span></span>
<span class="hljs-setting">innodb_flush_log_at_trx_commit = <span class="hljs-value"><span class="hljs-number">1</span></span></span>
<span class="hljs-setting">innodb_lock_wait_timeout = <span class="hljs-value"><span class="hljs-number">50</span></span></span>

<span class="hljs-title">[mysqldump]</span>
quick
<span class="hljs-setting">max_allowed_packet = <span class="hljs-value"><span class="hljs-number">16</span>M</span></span>

<span class="hljs-title">[mysql]</span>
no-auto-rehash
# Remove the next comment character if you are not familiar with SQL
#safe-updates

<span class="hljs-title">[isamchk]</span>
<span class="hljs-setting">key_buffer = <span class="hljs-value"><span class="hljs-number">20</span>M</span></span>
<span class="hljs-setting">sort_buffer_size = <span class="hljs-value"><span class="hljs-number">20</span>M</span></span>
<span class="hljs-setting">read_buffer = <span class="hljs-value"><span class="hljs-number">2</span>M</span></span>
<span class="hljs-setting">write_buffer = <span class="hljs-value"><span class="hljs-number">2</span>M</span></span>

<span class="hljs-title">[myisamchk]</span>
<span class="hljs-setting">key_buffer = <span class="hljs-value"><span class="hljs-number">20</span>M</span></span>
<span class="hljs-setting">sort_buffer_size = <span class="hljs-value"><span class="hljs-number">20</span>M</span></span>
<span class="hljs-setting">read_buffer = <span class="hljs-value"><span class="hljs-number">2</span>M</span></span>
<span class="hljs-setting">write_buffer = <span class="hljs-value"><span class="hljs-number">2</span>M</span></span>

<span class="hljs-title">[mysqlhotcopy]</span>
interactive-timeout

!include /opt/lampp/mysql/my.cnf</code></pre>

<p>一、启动方式 <br>
1、使用 service 启动：service mysqld start <br>
2、使用 mysqld 脚本启动：/etc/inint.d/mysqld start <br>
3、使用 safe_mysqld 启动：safe_mysqld&amp; <br>
二、停止 <br>
1、使用 service 启动：service mysqld stop <br>
2、使用 mysqld 脚本启动：/etc/inint.d/mysqld stop <br>
3、mysqladmin shutdown <br>
三、重启 <br>
1、使用 service 启动：service mysqld restart <br>
2、使用 mysqld  脚本启动：/etc/inint.d/mysqld restart <br>
参考资料: <a href="http://faq.comsenz.com/viewnews-89">http://faq.comsenz.com/viewnews-89</a></p>



<h2 id="开通外部连接权限">开通外部连接权限</h2>

<p>Mysql默认开放的连接权限是localhost，当你需要连接到其他机器上的时候，需要其他机器上的MySQL开启除本地以外的其他ip连接的权限。  </p>

<p>给从任意ip地址连接的用户名为root，密码为123的用户赋予所有的权限。其中的”%”为任意的ip地址，如果想设为特定的值也可以设定为特定的值。  </p>



<pre class="prettyprint"><code class=" hljs sql"><span class="hljs-operator"><span class="hljs-keyword">grant</span> <span class="hljs-keyword">all</span> <span class="hljs-keyword">privileges</span> <span class="hljs-keyword">on</span>   *.* <span class="hljs-keyword">to</span> root@<span class="hljs-string">"%"</span> identified <span class="hljs-keyword">by</span> <span class="hljs-string">'123'</span> <span class="hljs-keyword">with</span> <span class="hljs-keyword">grant</span> <span class="hljs-keyword">option</span>;</span> 
flush privileges;  </code></pre>



<h2 id="导入sql文件">导入SQL文件</h2>

<p>mysql&gt;source d:\datafilename.sql </p>



<h2 id="数据库排序规则">数据库排序规则</h2>

<p>utf8_general_ci</p>



<h2 id="phpmyadmin怎样导入csv">PhpMyAdmin怎样导入CSV?</h2>

<p>先向表里写几条数据, 然后导出来, 然后把格式套到你的数据上, 导入.  </p>